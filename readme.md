# Canvasベースの多機能JavaScriptテキストエディタ

## 概要

これは、HTMLの`<canvas>`要素とWeb Workerを使用して構築された、高機能なJavaScript向けテキストエディタのデモです。DOM要素に依存しないレンダリングにより高いパフォーマンスを実現しつつ、シンタックスハイライト、コード補完、リアルタイム診断といったモダンなIDEの機能を提供します。言語解析などの重い処理はWeb Workerにオフロードすることで、UIの応答性を維持しています。

## 主要機能

### コア技術

*   **Canvasによる高速レンダリング**: テキスト、カーソル、ハイライトなど、エディタのすべての要素をCanvas APIで描画し、スムーズな操作感を実現しています。
*   **Web Workerによる非同期な言語解析**: UIスレッドをブロックすることなく、バックグラウンドでJavaScriptコードのトークン化、パース、静的解析を実行します。

### 編集機能

*   **シンタックスハイライト**: JavaScriptのキーワード、文字列、コメント、数値、正規表現などをリアルタイムで色分け表示します。
*   **コード補完**: 入力中にキーワード、宣言済みの変数/関数、事前定義されたスニペット（`for`ループなど）の候補を一覧表示し、`Tab`または`Enter`で入力を確定できます。
*   **自動インデント**: `Enter`キーを押した際に、現在のコンテキスト（例: `{}`ブロックの内側）に応じてインデントを自動で調整します。
*   **インデント/アウトデント**: `Tab` / `Shift+Tab`キーで、選択した複数行のインデントレベルを一括で変更できます。
*   **コメントアウト切り替え**: `Ctrl + /` (または `Cmd + /`) で、選択範囲の行をまとめてコメントアウト/解除できます。
*   **基本的なテキスト操作**: Undo/Redo、コピー/ペースト/カット、複数行選択など、標準的な編集機能を網羅しています。

### 言語インテリセンス

*   **ホバー情報**: `console`などの特定のキーワードにマウスカーソルを合わせると、その機能に関する説明がポップアップで表示されます。
*   **定義へ移動**: 変数や関数の使用箇所で`F12`キーを押すと、その定義位置にカーソルがジャンプします。
*   **出現箇所のハイライト**: カーソル下の単語と同じ単語を、ファイル内で動的にハイライト表示します。
*   **括弧のマッチング**: カーソルが括弧 `()` `[]` `{}` の上、またはその内側にあるとき、対応するペアの括弧をハイライトし、コードブロックの範囲を視覚的に示します。

### コード解析と品質管理

*   **リアルタイム診断**: コードを解析し、問題点（例: デバッグ用の`console.log`の残存）を検知して波線で警告します。
*   **問題パネル**: 検出されたすべての問題が右側のパネルに一覧表示されます。項目をクリックすると、エディタ内の該当箇所へジャンプできます。

### UI/UX

*   **コードの折りたたみ (Code Folding)**: 関数やクラスなどのコードブロックを折りたたむことで、長いファイルでも見通しを良くすることができます。
*   **視覚補助機能**:
    *   行番号の表示
    *   カーソル行のハイライト
    *   インデントガイドの表示
    *   空白文字（半角/全角スペース、タブ）や行末の不要な空白の可視化
*   **日本語入力対応**: IMEを使用した日本語などの文字入力に対応しています。

## 技術スタック

*   **フロントエンド**: HTML5 Canvas, JavaScript (ES6+), Web Workers
*   **外部ライブラリ**: なし（すべて標準のWeb APIで実装）